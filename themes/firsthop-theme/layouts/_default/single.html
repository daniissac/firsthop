{{ define "title" }}{{ .Title }} - {{ .Site.Title }}{{ end }}

{{ define "description" }}{{ if .Params.summary }}{{ .Params.summary }}{{ else }}{{ .Summary }}{{ end }}{{ end }}

{{ define "main" }}
<div class="pb-16">
    <nav class="mb-8" aria-label="Breadcrumb">
        <a href="{{ .Site.BaseURL }}" class="inline-flex items-center text-gray-600 hover:text-gray-900 text-sm transition-colors">
            ‚Üê Back to home
        </a>
    </nav>

    <article>
        <header class="mb-8">
            <h1 class="text-3xl font-bold text-gray-900 mb-4">
                {{ .Title }}
            </h1>
            <div class="flex items-center space-x-4 text-sm text-gray-500">
                <time datetime="{{ .Date.Format "2006-01-02" }}">
                    {{ .Date.Format "January 2, 2006" }}
                </time>
                {{ if .Params.readingTime }}
                <span>{{ .Params.readingTime }}</span>
                {{ end }}
                {{ if .Params.tags }}
                <div class="flex space-x-2">
                    {{ range .Params.tags }}
                    <span class="bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs">{{ . }}</span>
                    {{ end }}
                </div>
                {{ end }}
            </div>
        </header>

        <div class="prose">
            {{ .Content }}
        </div>
        
        {{ if .Params.tags }}
        <footer class="mt-12 pt-8 border-t border-gray-200">
            <div class="flex flex-wrap gap-2">
                <span class="text-sm text-gray-600">Tagged:</span>
                {{ range .Params.tags }}
                <a href="{{ "/tags/" | relURL }}{{ . | urlize }}" class="text-sm text-gray-600 hover:text-gray-900 underline">
                    {{ . }}
                </a>
                {{ end }}
            </div>
        </footer>
        {{ end }}
    </article>
    
    {{/* Related Posts */}}
    {{ $related := .Site.RegularPages.Related . | first 3 }}
    {{ if $related }}
    <aside class="mt-16 pt-8 border-t border-gray-200">
        <h3 class="text-lg font-semibold text-gray-900 mb-6">Related Posts</h3>
        <div class="space-y-4">
            {{ range $related }}
            <article>
                <a href="{{ .Permalink }}" class="block group">
                    <h4 class="font-medium text-gray-900 group-hover:text-gray-700 transition-colors">
                        {{ .Title }}
                    </h4>
                    <p class="text-sm text-gray-600 mt-1">
                        {{ if .Params.summary }}{{ .Params.summary }}{{ else }}{{ .Summary | truncate 100 }}{{ end }}
                    </p>
                </a>
            </article>
            {{ end }}
        </div>
    </aside>
    {{ end }}
</div>
{{ end }}